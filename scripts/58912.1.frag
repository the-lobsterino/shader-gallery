// sanic from https://www.shadertoy.com/view/XtXcD2

#ifdef GL_ES
precision mediump float;
#endif

uniform float time;
uniform vec2 resolution;

#define PIXEL_ROW if(y < 1. && y >= 0.) {
#define END_ROW } y -= 1.;

#define P(R, G, B, A) if(x < 1. && x >= 0.) { color = vec4(R / 255.0, G / 255.0, B / 255.0, A); } x -= 1.;

#define CL P(0., 0., 0., 0.)

#define B1 P(96., 96., 224., 1.)
#define B2 P(64., 64., 224., 1.)
#define B3 P(32., 64., 192., 1.)
#define B4 P(32., 32., 160., 1.)

#define LB P(224., 160., 128., 1.)
#define DB P(160., 96., 64., 1.)

#define R1 P(224., 0., 0., 1.)
#define R2 P(128., 0., 0., 1.)

#define WH P(255., 255., 255., 1.)
#define BL P(0., 0., 0., 1.)

#define G0 P(224., 224., 224., 1.)
#define G1 P(160., 160., 160., 1.)
#define G2 P(128., 128., 128., 1.)
#define G3 P(64., 64., 64., 1.)

#define SONIC_WIDTH 27.
#define SONIC_HEIGHT 40.

vec4 draw_sonic(float x, float y) {
    vec4 color = vec4(0.);
    
    y = SONIC_HEIGHT - y;
    
    PIXEL_ROW CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL B3 B3 B3 B3 B3 CL CL CL CL CL CL CL CL CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL B3 B3 B3 B3 B3 B3 B3 B2 B2 B3 B3 B3 CL CL CL CL CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL B4 B4 B4 B4 B3 B3 B3 B3 B3 B4 B4 B2 B2 B2 B3 B3 CL CL CL CL B4 CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL B4 B4 B4 B4 B4 B3 B3 B4 LB B4 B2 B2 B2 B2 B3 B3 CL B4 B4 CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL B4 B4 B4 B4 DB LB LB B4 B2 B1 B2 B2 B2 B3 B4 B4 CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL B4 B3 B4 DB LB LB LB B3 B1 B1 B1 B2 B2 B3 B4 CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL B3 B3 B3 B4 DB DB B2 B2 B1 B1 B1 B1 B1 B2 B2 B3 CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL B3 B3 B3 B4 B3 B3 B3 B2 B2 B1 B2 B2 B2 B2 B1 B2 B2 B3 CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL B3 B3 B3 B3 B4 B4 B3 B2 B1 B1 B2 B2 B2 G1 G1 B1 B2 B1 B2 B2 B3 CL CL CL END_ROW
    PIXEL_ROW CL CL B3 B3 B3 B3 B3 B4 B4 B3 B1 WH B1 B2 B2 G1 WH WH G1 B1 B2 B2 B2 B1 CL CL CL END_ROW
    PIXEL_ROW CL B3 B3 B4 B4 B4 B3 B4 B4 B3 B2 B1 B1 B2 B2 WH WH WH WH BL B3 B2 B2 BL CL CL CL END_ROW
    PIXEL_ROW B4 B4 B4 B4 B4 B4 B4 B4 B4 B4 B3 B2 B2 B2 B2 WH WH WH WH BL BL B3 B2 BL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL B4 B4 B4 B4 B4 B3 B3 B3 B3 B2 WH WH WH WH BL BL B1 BL BL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL B4 B4 B4 B4 B3 B3 B3 B3 B1 WH WH WH BL BL WH BL G2 CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL B3 B3 B4 B4 B4 B4 B3 DB WH WH B1 WH WH WH WH DB G2 BL G2 CL CL END_ROW
    PIXEL_ROW CL CL CL CL B3 B3 B3 B3 B4 B4 B4 B4 DB LB LB LB WH WH WH WH LB LB BL BL BL CL CL END_ROW
    PIXEL_ROW CL CL CL B3 B3 B3 B4 B4 B4 B4 B4 B4 DB LB LB LB LB LB LB LB LB LB CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL B3 B4 B4 B4 B4 B4 B4 B4 B4 B4 DB LB LB LB LB LB DB DB R2 CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL B3 B4 B4 B4 B4 B4 B4 B4 B4 BL B4 B4 DB DB DB DB DB R2 R2 CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL B4 B4 B4 B4 B4 BL BL B4 B4 B3 R2 R2 R2 CL CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL CL B4 B4 LB LB LB LB B3 DB LB LB DB R2 CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL B4 LB LB DB DB DB B3 DB LB LB LB LB DB CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL B4 LB DB DB B4 B4 B4 B3 DB LB LB LB LB DB CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL B4 LB DB B4 B4 B4 B4 B3 DB DB LB LB DB R2 CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL B4 B4 DB WH WH G2 WH G2 B3 B3 DB DB DB R2 BL G3 CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL B4 B4 R2 WH G2 WH WH WH B4 B3 B3 B3 B3 B4 G3 G2 G2 CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL B4 B4 B4 G2 G3 G2 G2 G2 B4 B3 B4 BL B4 BL G3 G2 G2 CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL B4 CL CL CL G2 G2 G2 G2 B2 B3 CL B4 B4 BL BL G3 CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL CL CL BL G2 G2 B4 B2 CL CL B4 B4 CL CL CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL CL CL CL CL CL B4 B2 CL CL B4 B4 CL CL CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL CL CL CL CL B4 B2 CL CL CL B4 B4 CL CL CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL CL CL CL CL B4 B2 CL CL CL B4 B4 CL CL CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL CL CL G2 G1 G0 G0 G0 CL G3 G2 G2 G2 CL CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL CL CL G2 G2 G2 G1 G1 CL G3 G3 G3 G2 G2 CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL CL BL R2 G2 G2 R2 R2 G0 G2 G3 G3 G2 R2 CL CL CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL CL BL R2 R2 R2 G1 G0 G2 G2 R1 BL BL G3 G2 G2 CL CL CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL BL R2 R2 R2 G2 G1 R1 R1 R1 R1 R1 R1 BL BL BL R2 R2 CL CL END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL BL R2 R2 R2 G2 R1 R1 R1 R1 R1 R1 R1 R1 R1 R1 BL BL R2 R2 END_ROW
    PIXEL_ROW CL CL CL CL CL CL CL CL BL BL BL BL BL BL BL BL BL BL BL BL BL BL BL BL BL BL BL END_ROW

    return color;
}

void main( void ) {

	
	
    float scale = 0.5;
    float px = mod(gl_FragCoord.x * scale + time * 15.0, SONIC_WIDTH);
    float py = mod(gl_FragCoord.y * scale + time * 15.0, SONIC_HEIGHT);
    vec4 sonic = draw_sonic(px, py);
    
    vec3 color = mix(vec3(0.0, 0.5, 1.0), sonic.rgb, sonic.a);
    if(fract(gl_FragCoord.y * scale * 0.5) < 0.5) {
        color *= 0.95;
    }

    gl_FragColor.rgb = color;
    gl_FragColor.a = 1.;

}