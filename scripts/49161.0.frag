#ifdef GL_ES
precision mediump float;
#endif

#extension GL_OES_standard_derivatives : enable

uniform float time;
uniform vec2 mouse;
uniform vec2 resolution;

// TLM

float sample(float y, float x, float amp, float f1, float o1, float f2, float o2)
{
	return amp * sin((f1 * x + o1) * (f2 * y + o2));
}

void main( void ) {

	vec2 position = ( gl_FragCoord.xy / resolution.xy );
	position.y = 1.0 - position.y;

	float times = 0.75 * time;
	float color = 0.0;

	int t = int(times - (20.0 * floor(times / 20.0)));
	float t0 = (t==0 ? fract(times) : (t==1 ? 1.0 : (t==2 ? 1.0 - fract(times) : 0.0)));
	float t1 = (t==2 ? fract(times) : (t==3 ? 1.0 : (t==4 ? 1.0 - fract(times) : 0.0)));
	float t2 = (t==4 ? fract(times) : (t==5 ? 1.0 : (t==6 ? 1.0 - fract(times) : 0.0)));
	float t3 = (t==6 ? fract(times) : (t==7 ? 1.0 : (t==8 ? 1.0 - fract(times) : 0.0)));
	float t4 = (t==8 ? fract(times) : (t==9 ? 1.0 : (t==10 ? 1.0 - fract(times) : 0.0)));
	float t5 = (t==10 ? fract(times) : (t==11 ? 1.0 : (t==12 ? 1.0 - fract(times) : 0.0)));
	float t6 = (t==12 ? fract(times) : (t==13 ? 1.0 : (t==14 ? 1.0 - fract(times) : 0.0)));
	float t7 = (t==14 ? fract(times) : (t==15 ? 1.0 : (t==16 ? 1.0 - fract(times) : 0.0)));
	float t8 = (t==16 ? fract(times) : (t==17 ? 1.0 : (t==18 ? 1.0 - fract(times) : 0.0)));
	float t9 = (t==18 ? fract(times) : (t==19 ? 1.0 : (t==0 ? 1.0 - fract(times) : 0.0)));
	color += sample(position.x, position.y, t0 * 0.0885 + t1 * -0.0835 + t2 * 0.0658 + t3 * 0.0285 + t4 * -0.0342 + t5 * 0.0147 + t6 * 0.1282 + t7 * 0.0623 + t8 * 0.0698 + t9 * 0.0516 , t0 * 4.2146 + t1 * 0.4293 + t2 * 1.0613 + t3 * 2.8577 + t4 * 4.1311 + t5 * 2.5671 + t6 * 2.9862 + t7 * 4.0198 + t8 * 6.2550 + t9 * 2.6887 , t0 * 2.0000 + t1 * 2.0000 + t2 * 2.0000 + t3 * 2.0000 + t4 * 2.0000 + t5 * 2.0000 + t6 * 2.0000 + t7 * 2.0000 + t8 * 2.0000 + t9 * 2.0000 , t0 * -6.9120 + t1 * -14.6931 + t2 * -11.6367 + t3 * -9.0307 + t4 * -10.1129 + t5 * -9.5394 + t6 * -9.4619 + t7 * -6.6206 + t8 * -5.7766 + t9 * -9.7103 , t0 * -1.9995 + t1 * 0.8646 + t2 * -1.9994 + t3 * -1.9997 + t4 * -2.0000 + t5 * -1.9999 + t6 * -1.8481 + t7 * -1.9977 + t8 * -1.8349 + t9 * -1.9958 );
	color += sample(position.x, position.y, t0 * -0.1230 + t1 * 0.0967 + t2 * 0.0245 + t3 * 0.0598 + t4 * -0.0035 + t5 * 0.0067 + t6 * 0.1048 + t7 * 0.0045 + t8 * 0.0657 + t9 * 0.0457 , t0 * -2.3844 + t1 * 3.7740 + t2 * 0.4558 + t3 * -2.3174 + t4 * -0.4973 + t5 * -2.8664 + t6 * 2.5136 + t7 * 4.3839 + t8 * 1.4870 + t9 * 3.0554 , t0 * 0.6726 + t1 * 0.1823 + t2 * -0.9994 + t3 * 0.2512 + t4 * -0.2070 + t5 * 0.3715 + t6 * -1.2900 + t7 * -0.6022 + t8 * -0.9806 + t9 * -0.2292 , t0 * -0.9107 + t1 * 2.7146 + t2 * 0.0926 + t3 * -3.8172 + t4 * -0.7247 + t5 * -3.4307 + t6 * -3.6456 + t7 * 0.0911 + t8 * -1.6517 + t9 * 1.9037 , t0 * -0.2035 + t1 * -1.3101 + t2 * 0.5502 + t3 * 0.6991 + t4 * 0.0158 + t5 * 0.5615 + t6 * 0.6155 + t7 * 0.0227 + t8 * 0.4339 + t9 * 0.0789 );
	color += sample(position.x, position.y, t0 * -0.3642 + t1 * -0.0969 + t2 * -0.1555 + t3 * -0.3158 + t4 * -0.0786 + t5 * -0.2955 + t6 * -0.1721 + t7 * -0.2161 + t8 * -0.2586 + t9 * -0.1722 , t0 * -0.4095 + t1 * -0.4819 + t2 * -0.4493 + t3 * -0.4522 + t4 * -0.4601 + t5 * -0.4247 + t6 * -0.4239 + t7 * -0.4816 + t8 * -0.4818 + t9 * -0.4793 , t0 * 0.4378 + t1 * 0.5586 + t2 * 0.4421 + t3 * 0.4867 + t4 * 0.7978 + t5 * 0.5099 + t6 * 0.6519 + t7 * 0.2870 + t8 * 0.3494 + t9 * 0.3492 , t0 * -11.0779 + t1 * -15.7219 + t2 * -14.2784 + t3 * -10.4325 + t4 * -2.3636 + t5 * -7.9297 + t6 * -11.3332 + t7 * -26.9816 + t8 * -14.4466 + t9 * -12.7937 , t0 * 0.5118 + t1 * -1.8715 + t2 * 0.3180 + t3 * -1.2318 + t4 * -1.9901 + t5 * -1.3616 + t6 * 1.7533 + t7 * -0.9715 + t8 * 0.7103 + t9 * 0.2409 );
	color += sample(position.x, position.y, t0 * 0.1104 + t1 * -0.0650 + t2 * -0.0197 + t3 * -0.1016 + t4 * 0.0186 + t5 * 0.0578 + t6 * -0.0164 + t7 * 0.0792 + t8 * 0.0821 + t9 * 0.0763 , t0 * 17.4466 + t1 * -11.5951 + t2 * 18.3499 + t3 * 20.4512 + t4 * 8.3773 + t5 * 19.0087 + t6 * 14.4205 + t7 * 19.5963 + t8 * 19.4813 + t9 * 18.8365 , t0 * -0.3866 + t1 * -1.9766 + t2 * -1.2685 + t3 * 0.1464 + t4 * 1.8089 + t5 * -0.4808 + t6 * -0.5732 + t7 * -1.2535 + t8 * -0.0968 + t9 * 0.2072 , t0 * 1.3496 + t1 * 1.8034 + t2 * 2.3300 + t3 * 0.8513 + t4 * 3.0622 + t5 * 1.6190 + t6 * 0.0155 + t7 * 1.7379 + t8 * 2.1032 + t9 * 2.5830 , t0 * 0.5242 + t1 * -0.7767 + t2 * 0.4307 + t3 * 0.7040 + t4 * 0.9728 + t5 * 0.7082 + t6 * 0.0361 + t7 * 0.6599 + t8 * 0.4216 + t9 * 0.1664 );
	color += sample(position.x, position.y, t0 * 0.0062 + t1 * -0.1647 + t2 * 0.0104 + t3 * -0.0188 + t4 * 0.0042 + t5 * 0.0196 + t6 * 0.0075 + t7 * -0.0839 + t8 * -0.0430 + t9 * 0.0091 , t0 * -0.6244 + t1 * 2.3064 + t2 * -6.4447 + t3 * -5.1025 + t4 * 6.0218 + t5 * -6.2860 + t6 * -5.6948 + t7 * -4.1236 + t8 * -4.0820 + t9 * -4.3193 , t0 * 0.3253 + t1 * -1.1719 + t2 * -0.0248 + t3 * -0.3469 + t4 * 0.2794 + t5 * -0.1872 + t6 * 0.1390 + t7 * 0.7494 + t8 * -0.1190 + t9 * 0.5323 , t0 * -1.6653 + t1 * -2.4162 + t2 * 6.5269 + t3 * -0.2288 + t4 * 14.4866 + t5 * 2.8212 + t6 * -2.8424 + t7 * -4.5961 + t8 * 5.0471 + t9 * -2.3359 , t0 * 0.4755 + t1 * 1.7817 + t2 * -0.0257 + t3 * 0.7776 + t4 * 0.6745 + t5 * 0.6057 + t6 * 0.3537 + t7 * -0.3082 + t8 * 0.9586 + t9 * 0.6355 );
	color += sample(position.x, position.y, t0 * 0.0047 + t1 * -0.0056 + t2 * -0.0005 + t3 * 0.0007 + t4 * 0.0076 + t5 * 0.0048 + t6 * 0.0062 + t7 * 0.0020 + t8 * -0.0037 + t9 * 0.0059 , t0 * -0.2334 + t1 * -0.0054 + t2 * -1.8325 + t3 * -0.3710 + t4 * -1.0835 + t5 * 0.5090 + t6 * 0.9069 + t7 * -1.6532 + t8 * 0.0061 + t9 * 0.5883 , t0 * 0.0657 + t1 * 0.0562 + t2 * -0.0150 + t3 * -0.2286 + t4 * -0.0232 + t5 * -0.2667 + t6 * -0.1177 + t7 * -0.0687 + t8 * -0.1628 + t9 * -0.0632 , t0 * -2.1109 + t1 * 0.8291 + t2 * -1.5853 + t3 * -11.4250 + t4 * -13.5401 + t5 * -5.7928 + t6 * -23.0721 + t7 * 9.2154 + t8 * 4.3924 + t9 * -3.0280 , t0 * 0.1647 + t1 * 0.5336 + t2 * 0.2888 + t3 * 0.1653 + t4 * 0.3537 + t5 * 0.3156 + t6 * 0.4475 + t7 * 0.2720 + t8 * 0.2976 + t9 * 0.3578 );
	color += sample(position.x, position.y, t0 * -0.0505 + t1 * 0.0854 + t2 * 0.0636 + t3 * 0.0724 + t4 * 0.0043 + t5 * 0.0643 + t6 * 0.0774 + t7 * 0.1565 + t8 * 0.0349 + t9 * -0.0445 , t0 * -9.5826 + t1 * -10.6985 + t2 * -13.2100 + t3 * -12.6193 + t4 * -11.5578 + t5 * -13.4423 + t6 * -10.0510 + t7 * -6.7640 + t8 * -9.7376 + t9 * -9.1224 , t0 * -0.3606 + t1 * 1.5508 + t2 * 0.3551 + t3 * 1.1240 + t4 * 0.5812 + t5 * 1.5802 + t6 * 0.4180 + t7 * 0.9652 + t8 * 0.8756 + t9 * 0.9762 , t0 * 7.3149 + t1 * 2.6144 + t2 * 5.4295 + t3 * 4.5484 + t4 * 4.8426 + t5 * 4.6378 + t6 * 5.2917 + t7 * -0.8110 + t8 * 4.6194 + t9 * -0.1249 , t0 * -0.6305 + t1 * -1.6957 + t2 * -0.9083 + t3 * 0.0389 + t4 * -0.0591 + t5 * 0.1525 + t6 * -0.3266 + t7 * -1.3441 + t8 * -0.8036 + t9 * -1.3908 );
	color += sample(position.x, position.y, t0 * -0.1713 + t1 * -0.1617 + t2 * -0.1824 + t3 * -0.1345 + t4 * -0.0000 + t5 * -0.2531 + t6 * -0.0953 + t7 * -0.1639 + t8 * -0.0643 + t9 * -0.0817 , t0 * -7.0552 + t1 * -3.8845 + t2 * -8.1102 + t3 * -7.6915 + t4 * -7.3079 + t5 * -7.1623 + t6 * -7.3975 + t7 * -6.8370 + t8 * -8.2313 + t9 * -6.4120 , t0 * 1.2572 + t1 * 0.9875 + t2 * 1.1587 + t3 * 1.3933 + t4 * 0.9479 + t5 * 1.2633 + t6 * 0.6767 + t7 * 1.7775 + t8 * 1.5092 + t9 * 1.5835 , t0 * 1.4804 + t1 * 2.0723 + t2 * 0.6534 + t3 * 3.1751 + t4 * 1.5169 + t5 * 2.3927 + t6 * 1.0105 + t7 * 5.3555 + t8 * 4.6283 + t9 * 3.6931 , t0 * 1.3632 + t1 * 0.1007 + t2 * 1.6011 + t3 * 0.8021 + t4 * 1.6353 + t5 * 0.9489 + t6 * 1.4656 + t7 * 0.2014 + t8 * 0.6733 + t9 * -0.1303 );

	color += sample(position.x, position.y, t0 * -0.1677 + t1 * -0.0493 + t2 * -0.0999 + t3 * -0.0382 + t4 * -0.1082 + t5 * -0.0999 + t6 * -0.1078 + t7 * -0.1620 + t8 * -0.0353 + t9 * -0.0479 , t0 * -6.0662 + t1 * -1.0484 + t2 * -6.8717 + t3 * -8.6844 + t4 * -1.4783 + t5 * -6.0186 + t6 * -6.1514 + t7 * -8.2558 + t8 * -9.7123 + t9 * -4.8945 , t0 * -0.7721 + t1 * -1.9974 + t2 * -0.6248 + t3 * 0.5724 + t4 * -1.9217 + t5 * -0.7574 + t6 * -1.1117 + t7 * 0.4725 + t8 * 0.1113 + t9 * -0.7690 , t0 * -3.3572 + t1 * -8.3773 + t2 * -5.2531 + t3 * -4.9414 + t4 * -4.1482 + t5 * -4.1459 + t6 * -4.4598 + t7 * -4.4467 + t8 * -5.4703 + t9 * -5.0682 , t0 * -0.2411 + t1 * 1.9930 + t2 * 0.4546 + t3 * 0.5360 + t4 * -1.4027 + t5 * 0.0118 + t6 * 0.2744 + t7 * -0.1712 + t8 * 0.5909 + t9 * 0.0108 );
	color += sample(position.x, position.y, t0 * -0.0998 + t1 * 0.1250 + t2 * 0.0880 + t3 * 0.1884 + t4 * 0.1313 + t5 * 0.2320 + t6 * 0.1906 + t7 * 0.1426 + t8 * 0.2723 + t9 * 0.1684 , t0 * 9.6264 + t1 * 14.6249 + t2 * 5.8019 + t3 * 2.9993 + t4 * 5.4267 + t5 * 3.4812 + t6 * 5.2365 + t7 * 4.2149 + t8 * 3.8678 + t9 * 5.4007 , t0 * -1.9527 + t1 * 0.3273 + t2 * -1.9994 + t3 * -1.9929 + t4 * -1.9938 + t5 * -1.9991 + t6 * -1.9307 + t7 * -1.7835 + t8 * -1.7447 + t9 * -1.6906 , t0 * -3.4997 + t1 * -2.3985 + t2 * -1.6482 + t3 * -3.1560 + t4 * -0.9996 + t5 * -2.4519 + t6 * -1.1465 + t7 * -1.0122 + t8 * -1.2584 + t9 * -2.1526 , t0 * 1.9738 + t1 * 1.4135 + t2 * 1.9995 + t3 * 1.9897 + t4 * 1.9970 + t5 * 1.9989 + t6 * 1.9566 + t7 * 1.7994 + t8 * 1.6820 + t9 * 1.8556 );
	color += sample(position.x, position.y, t0 * 0.0565 + t1 * -0.0229 + t2 * 0.1046 + t3 * 0.1253 + t4 * 0.0323 + t5 * 0.2082 + t6 * 0.1028 + t7 * -0.2043 + t8 * -0.0658 + t9 * -0.0689 , t0 * 11.4516 + t1 * -6.3690 + t2 * -8.9521 + t3 * -2.9107 + t4 * -7.4633 + t5 * -4.6323 + t6 * -7.4921 + t7 * 2.7782 + t8 * -8.3392 + t9 * -5.9161 , t0 * 0.3065 + t1 * -0.3481 + t2 * 0.9461 + t3 * 1.8578 + t4 * 1.5604 + t5 * 1.8534 + t6 * 1.3246 + t7 * 1.0919 + t8 * 1.6989 + t9 * 1.6074 , t0 * 3.9772 + t1 * -3.9609 + t2 * 1.4427 + t3 * 0.7134 + t4 * 0.6294 + t5 * 0.5647 + t6 * 2.9799 + t7 * -1.1835 + t8 * 3.3545 + t9 * 0.1873 , t0 * 0.2107 + t1 * -0.0486 + t2 * 0.5373 + t3 * 0.4136 + t4 * 0.3677 + t5 * 0.3495 + t6 * -0.0281 + t7 * -0.0434 + t8 * -0.5320 + t9 * 0.5569 );
	color += sample(position.x, position.y, t0 * -0.1990 + t1 * -0.1012 + t2 * -0.0750 + t3 * -0.1071 + t4 * -0.0896 + t5 * -0.0786 + t6 * -0.0916 + t7 * -0.0380 + t8 * -0.1330 + t9 * -0.1558 , t0 * -4.7457 + t1 * -11.0404 + t2 * -7.2731 + t3 * -9.4920 + t4 * -6.2541 + t5 * -7.3971 + t6 * -5.4459 + t7 * -5.0070 + t8 * -3.9348 + t9 * -5.6887 , t0 * 1.8416 + t1 * -1.9994 + t2 * -0.4823 + t3 * -0.1389 + t4 * 1.2167 + t5 * 0.4611 + t6 * 0.1498 + t7 * -0.6220 + t8 * -0.1981 + t9 * -0.0394 , t0 * -2.8390 + t1 * -3.4659 + t2 * -2.5682 + t3 * -2.7408 + t4 * -2.1827 + t5 * -2.6134 + t6 * -3.1886 + t7 * -2.4017 + t8 * -2.8443 + t9 * -3.0021 , t0 * 1.9792 + t1 * 1.9999 + t2 * 1.9946 + t3 * 1.9887 + t4 * 1.9811 + t5 * 1.9925 + t6 * 1.9126 + t7 * 1.9913 + t8 * 1.9844 + t9 * 1.9872 );
	color += sample(position.x, position.y, t0 * 0.0901 + t1 * -0.0705 + t2 * 0.0606 + t3 * 0.1061 + t4 * 0.0939 + t5 * 0.0368 + t6 * 0.0750 + t7 * 0.1178 + t8 * 0.0828 + t9 * 0.0968 , t0 * -2.7741 + t1 * 0.7803 + t2 * 0.4193 + t3 * -0.9292 + t4 * -0.0785 + t5 * -0.7941 + t6 * -1.7257 + t7 * -2.7177 + t8 * -3.4793 + t9 * -0.8040 , t0 * -1.3613 + t1 * -1.9876 + t2 * -1.9359 + t3 * -1.9054 + t4 * -1.9794 + t5 * -1.9406 + t6 * -1.7004 + t7 * -1.4488 + t8 * -1.4592 + t9 * -1.8420 , t0 * -6.9371 + t1 * -15.1028 + t2 * -11.8623 + t3 * -9.4242 + t4 * -7.9101 + t5 * -9.5684 + t6 * -8.6131 + t7 * -7.8750 + t8 * -9.9704 + t9 * -10.7040 , t0 * -0.2770 + t1 * 0.8994 + t2 * -0.0358 + t3 * 0.0541 + t4 * -1.8113 + t5 * 0.3525 + t6 * 0.4904 + t7 * -0.4456 + t8 * 1.1574 + t9 * -0.0575 );
	color += sample(position.x, position.y, t0 * 0.1169 + t1 * 0.0269 + t2 * 0.0727 + t3 * 0.1660 + t4 * 0.0436 + t5 * 0.1176 + t6 * 0.1404 + t7 * 0.1135 + t8 * 0.1643 + t9 * 0.0558 , t0 * -6.7432 + t1 * -6.0709 + t2 * -6.9032 + t3 * -10.7642 + t4 * -5.2772 + t5 * -9.5933 + t6 * -6.1100 + t7 * -4.2673 + t8 * -2.3677 + t9 * -3.2702 , t0 * 0.2308 + t1 * -0.9153 + t2 * 0.1893 + t3 * -0.1980 + t4 * -1.3295 + t5 * -0.0723 + t6 * -0.7827 + t7 * -0.0729 + t8 * -1.0222 + t9 * -1.3653 , t0 * 6.9204 + t1 * 6.7217 + t2 * 3.0989 + t3 * 0.2176 + t4 * 4.0463 + t5 * 0.7465 + t6 * 7.1000 + t7 * 5.6373 + t8 * 5.9105 + t9 * 5.5230 , t0 * -0.6312 + t1 * -1.6058 + t2 * 1.3420 + t3 * 1.8261 + t4 * 0.2428 + t5 * 1.8740 + t6 * -1.0854 + t7 * -1.0591 + t8 * -0.7550 + t9 * -1.5870 );
	color += sample(position.x, position.y, t0 * -0.0831 + t1 * -0.1204 + t2 * -0.2626 + t3 * -0.2302 + t4 * -0.1412 + t5 * -0.1582 + t6 * -0.2642 + t7 * -0.1588 + t8 * -0.2357 + t9 * -0.1393 , t0 * -3.1482 + t1 * -4.3454 + t2 * -2.5098 + t3 * -2.1583 + t4 * -2.8579 + t5 * -1.8435 + t6 * -2.2478 + t7 * -3.2369 + t8 * -4.1849 + t9 * -3.9870 , t0 * -0.6969 + t1 * -0.9583 + t2 * -0.7012 + t3 * -1.0415 + t4 * -0.2762 + t5 * -1.4578 + t6 * -0.3022 + t7 * -0.8145 + t8 * -0.0337 + t9 * -0.4669 , t0 * 2.3261 + t1 * 3.2891 + t2 * 2.2304 + t3 * 3.1813 + t4 * 2.1776 + t5 * 3.6334 + t6 * 2.0798 + t7 * 3.1958 + t8 * 2.7643 + t9 * 3.2574 , t0 * -0.0910 + t1 * -1.1262 + t2 * -0.2032 + t3 * -1.0635 + t4 * -0.1702 + t5 * -1.1281 + t6 * 0.0795 + t7 * -0.8609 + t8 * -0.4671 + t9 * -0.8810 );


	gl_FragColor = vec4( pow(abs(color), 2.0 ));

}

